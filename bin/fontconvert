#!/usr/bin/env -S fontforge -quiet
# -*- mode: python; coding: utf-8 -*-
import os, re, argparse
def main():
    global args
    parser = argparse.ArgumentParser(description="convert fonts from one format to another")
    parser.add_argument('source_filename')
    parser.add_argument('dest_filename', nargs = '+', default = [], help = "extension determines format/format; can also be, e.g., \".ttf\")")
    args = parser.parse_args()
    print("Loading %s" % args.source_filename)
    font = fontforge.open(args.source_filename)
    for dest_filename in args.dest_filename:
        if re.search(r'^\.[A-Za-z0-9]+$', dest_filename):
            (source_base, source_ext) = os.path.splitext(args.source_filename)
            dest_filename = source_base + dest_filename
        if dest_filename.endswith('.sfd'):
            print("Saving %s" % dest_filename)
            font.save(dest_filename)
        else:
            print("Generating %s" % dest_filename)
            font.generate(dest_filename)
main()
